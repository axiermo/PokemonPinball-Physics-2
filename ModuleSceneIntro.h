#pragma once
#include "Module.h"
#include "p2List.h"
#include "p2Point.h"
#include "Globals.h"

class PhysBody;

class ModuleSceneIntro : public Module
{
public:
	ModuleSceneIntro(Application* app, bool start_enabled = true);
	~ModuleSceneIntro();

	bool Start();
	update_status Update();
	bool CleanUp();
	void OnCollision(PhysBody* bodyA, PhysBody* bodyB);

public:
	p2List<PhysBody*> circles;
	p2List<PhysBody*> chains;

	//PhysBody* sensor;
	bool sensed;

	SDL_Texture* circle;
	SDL_Texture* background;
	//ficar textura del mapa i de les pales
	uint bonus_fx;
	p2Point<int> ray;
	bool ray_on;

	int board[182] = {
		0, 957,
		225, 957,
		225, 945,
		167, 915,
		125, 890,
		88, 865,
		88, 893,
		54, 893,
		54, 749,
		56, 741,
		60, 734,
		65, 730,
		72, 727,
		91, 727,
		98, 726,
		103, 722,
		107, 716,
		108, 708,
		108, 643,
		88, 623,
		72, 599,
		58, 572,
		45, 544,
		34, 509,
		27, 472,
		26, 458,
		26, 415,
		30, 381,
		37, 338,
		46, 308,
		62, 274,
		80, 247,
		109, 217,
		145, 194,
		185, 176,
		217, 167,
		248, 164,
		301, 164,
		331, 168,
		360, 177,
		389, 188,
		417, 205,
		439, 218,
		457, 230,
		483, 251,
		512, 279,
		525, 297,
		537, 321,
		546, 344,
		553, 366,
		560, 396,
		564, 429,
		564, 920,
		532, 920,
		532, 468,
		528, 418,
		523, 376,
		515, 342,
		501, 313,
		493, 306,
		493, 324,
		502, 353,
		508, 381,
		511, 414,
		512, 462,
		508, 495,
		501, 527,
		490, 556,
		472, 592,
		458, 614,
		448, 628,
		432, 642,
		432, 716,
		434, 721,
		439, 725,
		447, 728,
		468, 728,
		475, 730,
		480, 733,
		484, 739,
		486, 750,
		486, 892,
		452, 892,
		452, 865,
		397, 901,
		349, 927,
		317, 943,
		317, 957,
		577, 957,
		577, 0,
		0, 0

	};

	int L_left[24] = {
		195, 902,
		100, 842,
		96, 834,
		96, 751,
		101, 744,
		108, 744,
		112, 750,
		112, 806,
		112, 813,
		116, 817,
		208, 876,
		208, 890
	};
	int L_right[24]{
		347, 901,
		438, 841,
		443, 834,
		442, 748,
		432, 746,
		429, 753,
		428, 812,
		422, 823,
		408, 832,
		334, 880,
		333, 887,
		338, 894
		
	};
	int triangle_right[18] = {
		342, 822,
		343, 808,
		381, 750,
		388, 745,
		393, 752,
		392, 792,
		388, 796,
		381, 801,
		352, 820
	};
	// Pivot 0, 0
	int triangle_left[16] = {
		148, 793,
		146, 753,
		150, 745,
		155, 747,
		196, 807,
		194, 817,
		190, 822,
		157, 800
	};

	int topwall[38] = {
		120, 446,
		98, 424,
		79, 394,
		71, 367,
		78, 334,
		86, 305,
		102, 272,
		115, 252,
		131, 240,
		131, 267,
		126, 273,
		121, 285,
		116, 298,
		112, 316,
		110, 330,
		110, 363,
		112, 389,
		115, 407,
		120, 429
	};
	// Pivot 0, 0
	int balls_warehouse[30] = {
		220, 956,
		156, 997,
		150, 1052,
		182, 1108,
		234, 1141,
		310, 1143,
		363, 1140,
		385, 1086,
		384, 1021,
		363, 972,
		325, 959,
		408, 962,
		430, 1167,
		139, 1159,
		123, 954
	};

	

	

};
